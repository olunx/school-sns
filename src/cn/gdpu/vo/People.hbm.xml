<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="cn.gdpu.vo">
	<class name="People" table="t_people">
		<id name="id" column="id">
			<generator class="native" />
		</id>
		<property name="username" />
		<property name="password" />
		<property name="name" />
		<property name="sex" />
		<property name="permission" />
		<property name="avatar" />
		<property name="phoneNo" />
		<property name="qq" />
		<property name="email" />
		<!-- 
			private int id;
			private School school;
			private Institute institute;
			private Classes classes;
			private String dorm;
			private int entryYear;
			private String sno;
			private String nickname;
			private String status;
			private String activity;
			private Date lastlogin;
			private Long point;
			private Set<Duty> duty;
			private Set<Hobby> hobby;
			private Set<Group> group;
			private Set<Achievement> achievement;
			private Set<Student> friends;
			private Set<Score> scores;
		 -->
		<joined-subclass name="Student" table="t_student"> 
            <key column="id" /> 
			<many-to-one name="school" column="schoolId"/>
			<many-to-one name="institute" column="instituteId"/>
			<many-to-one name="classes" column="classesId"/>
			<property name="dorm"/>
			<property name="entryYear"/>
			<property name="sno"/>
			<property name="nickname"/>
			<property name="status"/>
			<property name="activity"/>
			<property name="lastlogin"/>
			<property name="point"/>
			<set name="duty" lazy="true">
				<key column="dutyId"/>
				<one-to-many class="Duty" />
			</set>
			<set name="hobby" lazy="true">
				<key column="hobbyId"/>
				<one-to-many class="Hobby" />
			</set>
			<set name="group" lazy="true">
				<key column="groupId"/>
				<one-to-many class="Group" />
			</set>
			<set name="achievement" lazy="true">
				<key column="achievementId"/>
				<one-to-many class="Achievement" />
			</set>
			<set name="friends" lazy="true">
				<key column="friendsId"/>
				<one-to-many class="Student" />
			</set>
			
			<set name="scores" inverse="true" cascade="all" lazy="true" order-by="id asc">
				<key column="scoreId"/>
				<one-to-many class="Score" />
			</set>
			
			
		 </joined-subclass> 
		 <!-- 
		 	教师
			private School school;
			private String division;
			private Duty duty;
			private Set<Excel> excel;
		 -->
		 <joined-subclass name="Teacher" table="t_teacher"> 
		 	<key column="id" /> 
		 	<property name="division"/>
		 	<many-to-one name="school" column="schoolId"></many-to-one>
		 	<many-to-one name="duty" column="dutyId"></many-to-one>
		 	
			<set name="excel" lazy="true">
				<key column="excelId"/>
				<one-to-many class="Excel" />
			</set>
		 </joined-subclass>
		 <joined-subclass name="Admin" table="t_admin"> 
		 	<key column="id" /> 
		 </joined-subclass>
	</class>
</hibernate-mapping>
